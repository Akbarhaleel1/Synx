import LinkPageModal from './components/IntegrationModal';
import { useState, useEffect } from 'react';
import Nav from '../components/Nav';
import axios from 'axios'

import useAuth from './customHooks/useAuth';
import { useNavigate } from 'react-router-dom';


const PlatformIcon = ({ name, color }) => {
  useAuth()
  const icons = {
    'booking.com': (
      <svg clip-rule="evenodd" fill-rule="evenodd" height="2445" stroke-linejoin="round" stroke-miterlimit="1.414" viewBox="-.092 .015 2732.125 2671.996" width="2500" xmlns="http://www.w3.org/2000/svg"><path d="m2732.032 513.03c0-283.141-229.978-513.015-513.118-513.015h-1705.89c-283.138 0-513.116 229.874-513.116 513.015v1645.965c0 283.066 229.978 513.016 513.118 513.016h1705.889c283.14 0 513.118-229.95 513.118-513.016z" fill="#0c3b7c"/><path d="m.001 1659.991h1364.531v1012.019h-1364.53z" fill="#0c3b7c"/><g fill-rule="nonzero"><path d="m1241.6 1768.638-220.052-.22v-263.12c0-56.22 21.808-85.48 69.917-92.165h150.136c107.068 0 176.328 67.507 176.328 176.766 0 112.219-67.507 178.63-176.328 178.739zm-220.052-709.694v-69.26c0-60.602 25.643-89.424 81.862-93.15h112.657c96.547 0 154.41 57.753 154.41 154.52 0 73.643-39.671 159.67-150.903 159.67h-198.026zm501.037 262.574-39.78-22.356 34.74-29.699c40.437-34.74 108.163-112.876 108.163-247.67 0-206.464-160.109-339.614-407.888-339.614h-282.738v-.11h-32.219c-73.424 2.74-132.273 62.466-133.04 136.329v1171.499h453.586c275.396 0 453.148-149.917 453.148-382.135 0-125.04-57.424-231.889-153.972-286.244" fill="#fff"/><path d="m1794.688 1828.066c0-89.492 72.178-161.894 161.107-161.894 89.154 0 161.669 72.402 161.669 161.894 0 89.379-72.515 161.894-161.67 161.894-88.928 0-161.106-72.515-161.106-161.894" fill="#00bafc"/></g></svg>
    ),
    'airbnb': (
      <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="100" height="100" viewBox="0,0,256,256">
      <g fill="#f04229" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><g transform="scale(5.33333,5.33333)"><path d="M42.459,32.519c-1.037,-3.336 -9.539,-19.596 -12.12,-24.5l-0.026,-0.048c-1.16,-2.412 -3.637,-3.971 -6.313,-3.971c-2.676,0 -5.153,1.559 -6.291,3.929l-0.048,0.091c-2.581,4.903 -11.083,21.163 -12.119,24.498c-0.281,0.903 -0.542,1.889 -0.542,2.982c0,4.687 3.813,8.5 8.5,8.5c4.654,0 7.612,-1.949 10.5,-5.184c2.888,3.235 5.846,5.184 10.5,5.184c4.687,0 8.5,-3.813 8.5,-8.5c0,-1.093 -0.261,-2.079 -0.541,-2.981zM23.999,34.662c-1.669,-2.147 -3.999,-5.781 -3.999,-8.662c0,-2.206 1.794,-4 4,-4c2.206,0 4,1.794 4,4c0,2.872 -2.332,6.511 -4.001,8.662zM34.5,41c-3.287,0 -5.521,-1.107 -8.325,-4.258c1.703,-2.146 4.825,-6.638 4.825,-10.742c0,-3.86 -3.141,-7 -7,-7c-3.859,0 -7,3.14 -7,7c0,4.104 3.122,8.596 4.825,10.742c-2.804,3.151 -5.038,4.258 -8.325,4.258c-3.032,0 -5.5,-2.467 -5.5,-5.5c0,-0.653 0.162,-1.308 0.406,-2.09c0.764,-2.46 6.894,-14.462 11.91,-23.993l0.076,-0.146c0.663,-1.38 2.079,-2.271 3.608,-2.271c1.529,0 2.945,0.891 3.615,2.285l0.068,0.132c5.017,9.531 11.147,21.533 11.912,23.994c0.243,0.781 0.405,1.436 0.405,2.089c0,3.033 -2.468,5.5 -5.5,5.5z"></path></g></g>
      </svg>
    ),
   'Google': (
    <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="100" height="100" viewBox="0 0 48 48">
    <path fill="#00b67a" d="M45.023,18.995H28.991L24.039,3.737l-4.968,15.259L3.039,18.98l12.984,9.44l-4.968,15.243 l12.984-9.424l12.968,9.424L32.055,28.42L45.023,18.995z"></path><path fill="#005128" d="M33.169,31.871l-1.114-3.451l-8.016,5.819L33.169,31.871z"></path>
    </svg>
),
    'agoda': (
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill={color} className="w-10 h-10">
        <path d="M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.6 0 12 0zm0 22.5C6.2 22.5 1.5 17.8 1.5 12S6.2 1.5 12 1.5 22.5 6.2 22.5 12 17.8 22.5 12 22.5z" />
        <path d="M12 4.5c-2.2 0-4 1.8-4 4s1.8 4 4 4 4-1.8 4-4-1.8-4-4-4zm0 6.5c-1.4 0-2.5-1.1-2.5-2.5S10.6 6 12 6s2.5 1.1 2.5 2.5S13.4 11 12 11z" />
      </svg>
    ),
    'trustpilot': (
      <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="100" height="100" viewBox="0 0 48 48">
      <path fill="#00b67a" d="M45.023,18.995H28.991L24.039,3.737l-4.968,15.259L3.039,18.98l12.984,9.44l-4.968,15.243 l12.984-9.424l12.968,9.424L32.055,28.42L45.023,18.995z"></path><path fill="#005128" d="M33.169,31.871l-1.114-3.451l-8.016,5.819L33.169,31.871z"></path>
      </svg>
    ),
    'tripadvisor': (
      <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="100" height="100" viewBox="0 0 50 50">
<path d="M 25 11 C 19.167969 11 13.84375 12.511719 9.789063 15 L 2 15 C 2 15 3.753906 17.152344 4.578125 19.578125 C 2.96875 21.621094 2 24.195313 2 27 C 2 33.628906 7.371094 39 14 39 C 17.496094 39 20.636719 37.492188 22.828125 35.105469 L 25 38 L 27.171875 35.105469 C 29.363281 37.492188 32.503906 39 36 39 C 42.628906 39 48 33.628906 48 27 C 48 24.195313 47.03125 21.621094 45.421875 19.578125 C 46.246094 17.152344 48 15 48 15 L 40.203125 15 C 36.148438 12.511719 30.828125 11 25 11 Z M 25 13 C 28.882813 13 32.585938 13.707031 35.800781 15.011719 C 30.964844 15.089844 26.824219 18.027344 25 22.214844 C 23.171875 18.019531 19.023438 15.078125 14.171875 15.011719 L 14.242188 14.988281 C 17.453125 13.699219 21.144531 13 25 13 Z M 14 17 C 19.523438 17 24 21.476563 24 27 C 24 32.523438 19.523438 37 14 37 C 8.476563 37 4 32.523438 4 27 C 4 21.476563 8.476563 17 14 17 Z M 36 17 C 41.523438 17 46 21.476563 46 27 C 46 32.523438 41.523438 37 36 37 C 30.476563 37 26 32.523438 26 27 C 26 21.476563 30.476563 17 36 17 Z M 14 21 C 10.6875 21 8 23.6875 8 27 C 8 30.3125 10.6875 33 14 33 C 17.3125 33 20 30.3125 20 27 C 20 23.6875 17.3125 21 14 21 Z M 36 21 C 32.6875 21 30 23.6875 30 27 C 30 30.3125 32.6875 33 36 33 C 39.3125 33 42 30.3125 42 27 C 42 23.6875 39.3125 21 36 21 Z M 14 23 C 16.210938 23 18 24.789063 18 27 C 18 29.210938 16.210938 31 14 31 C 11.789063 31 10 29.210938 10 27 C 10 24.789063 11.789063 23 14 23 Z M 36 23 C 38.210938 23 40 24.789063 40 27 C 40 29.210938 38.210938 31 36 31 C 33.789063 31 32 29.210938 32 27 C 32 24.789063 33.789063 23 36 23 Z M 14 25 C 12.894531 25 12 25.894531 12 27 C 12 28.105469 12.894531 29 14 29 C 15.105469 29 16 28.105469 16 27 C 16 25.894531 15.105469 25 14 25 Z M 36 25 C 34.894531 25 34 25.894531 34 27 C 34 28.105469 34.894531 29 36 29 C 37.105469 29 38 28.105469 38 27 C 38 25.894531 37.105469 25 36 25 Z"></path>
</svg>
    ),
    'makeMyTrip': (
      <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 width="960px" height="305px" viewBox="0 0 960 305" enable-background="new 0 0 960 305" xml:space="preserve">
<g>
	<path fill="#CF381E" d="M630.465,304.88c18.435-0.239,35.911-7.421,48.598-20.35c12.929-12.927,20.11-30.402,20.11-48.598V69.547
		c0-18.433-7.182-35.911-19.869-49.077C666.376,7.541,648.899,0.12,630.465,0.12H463.122c-18.434,0.24-35.911,7.421-48.599,20.35
		c-12.928,13.167-20.11,30.645-20.11,49.077v166.625c0.239,37.826,30.883,68.469,68.709,68.708"/>
	<path fill="#FFFFFF" d="M583.063,161.957c-6.465,21.546,4.068,43.092,26.333,34.475c-6.464,15.561-17.238,38.782-17.238,62.962
		c0,0,0,16.28,11.97,20.35c0,0,16.76,4.07,13.171-10.773c-2.634-9.337-3.351-18.912-2.155-28.488
		c4.068-19.872,10.295-39.263,18.435-57.936c0,0,25.616-53.388,40.458-78.285c0,0,6.223-12.688-6.465-12.688
		c-3.83,0-7.422,1.915-9.814,5.026l-36.148,64.399c-5.51,10.056-10.774,13.169-14.846,13.169c-9.095,0-7.182-14.604-5.744-19.873
		c4.068-17.955,10.533-35.189,19.152-51.711c6.464-14.124-6.465-15.32-6.465-15.32c-8.141-2.155-14.363,11.253-14.363,11.253
		l-14.365,29.206c-9.337,16.28-19.631,31.841-30.643,46.924c0,0-1.918,2.393-3.352,1.437c-1.438-1.198-0.721-3.591-0.721-3.591
		c2.396-19.872,6.465-39.503,11.971-58.895c0.24-1.198,0.479-2.154,0.479-3.351c0.242-2.634-0.479-5.267-2.154-7.184
		c-1.676-2.154-4.068-3.351-6.703-3.351c-6.464-0.717-9.577,2.395-15.32,9.336c-12.688,15.563-27.533,39.023-34.715,49.558
		c-0.717,1.196-2.154,0.957-2.154-0.719c0-4.789,16.759-56.5,16.759-56.5s1.913-7.181-3.83-9.575c0,0-8.856-5.506-16.042,5.266
		l-34.473,46.925c-2.633,3.591-4.069,2.395-4.069,2.395v-3.113l5.506-30.643c4.31-23.461-3.83-24.659-9.097-25.616
		c-3.831,0-7.9,1.196-11.253,3.352c-10.772,5.266-18.912,26.574-18.912,26.574s-2.394,7.66,2.872,10.771
		c1.677,0.957,3.592,1.676,5.507,1.437c7.661-0.479,9.098-14.604,14.604-14.604c0.958,0,0.958,1.198,0.958,1.438l-17.716,74.455
		c-1.197,4.308,0.718,8.856,4.31,11.251c2.394,1.437,5.027,1.676,7.66,1.196c2.395-0.717,4.549-2.393,5.985-4.547l6.463-10.055
		c9.338-16.52,26.575-40.221,28.251-40.221c0.717,0,0.959,0,0.959,0.717l-6.466,43.813c-0.719,3.83,1.437,7.899,5.028,9.575
		c3.351,1.196,6.943,0.957,10.053-0.719c3.592-2.872,6.705-6.464,8.86-10.534c3.589-5.745,20.827-26.095,31.359-44.768
		c0.721-1.198,1.438,0,1.2,0.719c-2.154,9.815-3.834,35.909-4.072,42.373c-0.479,12.689,9.336,14.125,9.578,14.125
		c6.465,0.479,12.688-2.395,16.279-7.66"/>
	<path fill="#174880" d="M67.868,190.924H48.715v-42.853c0.24-4.788-0.719-9.577-2.872-13.646c-2.155-3.113-5.985-5.028-9.816-4.549
		c-3.352,0-6.464,0.719-9.097,2.395c-2.874,1.915-5.267,4.547-6.942,7.421v51.231H0.835V113.12h10.772l7.183,10.532
		c1.915-1.676,3.83-3.113,5.745-4.548c1.915-1.198,3.83-2.154,5.985-3.113c2.154-0.958,4.31-1.676,6.464-2.154
		c2.154-0.479,4.549-0.717,6.943-0.717c2.633,0,5.266,0.237,7.66,0.956c1.915,0.719,3.83,1.436,5.745,2.632
		c1.438,1.198,2.873,2.635,4.07,4.072c1.437,1.913,2.395,3.589,3.353,5.506c1.436-1.438,3.112-3.113,5.027-4.549
		c1.915-1.437,4.069-2.874,6.463-4.07c2.155-1.436,4.55-2.634,7.183-3.591c2.873-0.719,5.745-1.198,8.857-1.198
		c3.83,0,7.422,0.959,10.773,2.634c3.112,1.916,5.746,4.31,7.422,7.182c1.915,3.593,3.351,7.184,4.069,11.253
		c0.958,4.548,1.437,9.099,1.437,13.886v43.092H96.596v-42.853c0.479-4.788-0.479-9.577-2.872-13.646
		c-2.155-3.113-5.747-5.028-9.577-4.549c-3.112,0-6.225,0.719-9.098,2.395c-2.872,1.915-5.506,4.31-7.181,7.421"/>
	<path fill="#174880" d="M178.472,155.492h-16.997c-3.592-0.239-6.943,0.72-10.056,2.635c-1.915,1.915-3.112,4.549-3.112,7.421
		c0,2.634,0.958,5.028,2.873,6.943c2.154,1.676,5.027,2.632,7.9,2.393c2.154,0,4.31-0.238,6.464-0.957
		c1.915-0.479,3.83-1.198,5.506-2.154c1.676-1.196,3.112-2.395,4.31-3.591c1.437-1.438,2.394-2.874,3.352-4.31 M178.472,182.307
		c-2.634,2.632-5.984,4.787-9.337,6.225c-4.548,1.676-9.337,2.632-14.125,2.393c-3.351,0.239-6.942-0.478-10.055-1.676
		c-2.873-1.196-5.506-2.871-7.9-5.026c-2.155-2.395-3.83-5.028-5.027-7.9c-1.197-3.113-1.676-6.464-1.676-9.815
		c0-14.364,11.252-23.702,29.208-23.702h19.151v-4.31c0-2.872-1.676-5.265-4.069-6.463c-3.831-1.677-8.14-2.634-12.449-2.395
		c-4.788,0-9.576,0.718-14.125,1.676c-3.591,0.959-7.183,2.155-10.773,3.593l-2.154-16.042c1.197-0.717,2.873-1.196,5.027-1.913
		c1.915-0.719,4.31-1.198,6.465-1.917c2.153-0.479,5.027-0.957,7.899-1.437c2.873-0.477,5.985-0.477,9.098-0.477
		c8.858-0.722,17.955,2.154,24.658,7.897c5.985,6.227,8.858,14.604,8.379,22.984v46.922h-13.646L178.472,182.307z"/>
	<polyline fill="#174880" points="286.442,111.922 255.559,150.706 290.752,190.685 266.812,190.685 234.253,151.185 
		234.253,190.685 215.34,190.685 215.34,84.15 234.253,84.15 234.253,151.185 263.221,111.922 286.442,111.922 	"/>
	<path fill="#174880" d="M328.816,130.354c-2.394,0-4.787,0.241-6.942,0.958c-1.915,0.479-3.83,1.438-5.267,2.634
		c-1.676,0.959-2.873,2.393-3.831,4.07c-0.957,1.676-1.675,3.351-2.154,5.267h33.756c0-1.676-0.239-3.352-0.958-5.027
		c-0.479-1.438-1.676-2.873-2.873-4.069c-1.436-1.198-3.112-2.155-4.787-2.874C333.365,130.596,330.972,130.116,328.816,130.354
		 M332.407,174.167c2.873,0,5.985-0.24,8.858-0.959c2.634-0.479,5.267-1.196,7.661-2.154c2.155-0.718,4.309-1.676,6.225-2.872
		c0.958-0.479,1.915-1.198,2.873-1.915l3.591,16.996c-4.07,2.155-8.38,4.07-12.928,5.506c-5.268,1.438-10.773,2.155-16.28,2.155
		c-5.984,0-11.97-0.957-17.716-2.872c-4.548-1.675-9.097-4.31-12.688-7.9c-3.592-3.353-6.225-7.66-7.9-12.209
		c-2.154-4.789-3.112-10.056-3.352-15.562c0-5.028,0.718-10.057,2.395-14.844c1.675-4.787,4.069-8.858,7.421-12.688
		c3.112-3.589,7.182-6.465,11.731-8.378c10.293-4.072,22.023-4.072,32.318,0c4.31,1.676,7.9,4.547,11.013,7.898
		c2.873,3.353,5.027,7.183,6.464,11.253c1.196,4.31,1.916,8.856,1.916,13.408c0,1.196,0,2.632,0,4.067
		c-0.24,1.438-0.479,2.874-0.72,4.07h-52.908c0.24,2.634,0.958,5.028,2.155,7.184c0.958,2.154,2.634,4.069,4.549,5.506
		c1.915,1.675,4.07,2.871,6.703,3.351c2.634,0.959,5.506,1.438,8.618,1.438V174.167z"/>
	<path fill="#174880" d="M717.845,124.131l25.378-30.644h5.748v19.391h21.785v16.759h-21.785v32.08c0,1.676,0.237,3.591,0.717,5.506
		c0.479,1.198,1.196,2.395,2.154,3.591c0.959,0.719,2.155,1.438,3.352,1.678c1.196,0.478,2.396,0.717,3.83,0.717
		c2.154,0,4.31-0.239,6.227-0.956c1.913-0.24,3.589-0.959,5.265-1.676v16.996c-1.914,0.959-4.068,1.676-6.465,2.155
		c-6.702,1.436-13.646,1.196-20.11-0.719c-3.109-0.957-5.743-2.632-8.14-4.787c-1.913-2.155-3.589-4.789-4.547-7.66
		c-0.959-3.113-1.676-6.704-1.438-10.056v-36.39H717.37"/>
	<path fill="#174880" d="M803.315,129.158c2.872-4.789,6.46-8.857,11.012-11.971c3.83-2.872,8.619-4.31,13.646-4.067
		c1.438-0.242,2.872-0.242,4.31,0l2.634,0.477c0,0-0.479,4.31-3.354,17.716c-1.435-0.237-2.872-0.479-4.306-0.237
		c-3.355-0.242-6.465,0.477-9.578,1.675c-2.871,1.196-5.268,3.111-7.181,5.506c-1.918,2.393-3.593,5.267-4.552,8.378
		c-0.954,3.83-1.434,7.66-1.434,11.493v32.797H785.36V113.12h11.97"/>
	<path fill="#174880" d="M920.862,130.116c-2.155-0.239-4.31,0.238-6.227,0.959c-1.913,0.717-3.589,1.675-5.269,2.871
		c-1.434,0.959-2.63,2.393-3.83,3.831c-0.955,1.438-1.913,2.871-2.393,4.547v22.027c0.717,1.436,1.676,2.632,2.872,3.83
		c1.2,1.196,2.396,2.154,3.83,3.111c1.676,0.959,3.351,1.676,5.03,2.155c4.785,1.197,9.815,0.958,14.362-0.72
		c2.155-1.196,4.31-2.632,5.748-4.547c1.675-1.915,2.871-4.31,3.589-6.704c0.717-2.872,1.196-5.985,1.438-9.097
		c0-2.873-0.479-5.984-1.438-9.098c-0.718-2.635-1.914-5.027-3.589-7.182c-1.68-1.915-3.593-3.593-5.985-4.55
		c-2.396-1.197-4.789-1.675-7.423-1.675 M926.126,113.12c5.269-0.242,10.295,0.956,14.846,3.111
		c4.068,2.152,7.42,5.028,10.291,8.858c2.634,3.83,4.789,8.14,5.985,12.688c1.2,4.788,1.917,9.815,1.917,14.604
		c0,5.026-0.717,10.056-2.154,14.842c-1.196,4.55-3.352,8.619-6.224,12.21c-2.875,3.591-6.227,6.465-10.294,8.38
		c-4.31,2.154-9.34,3.111-14.125,3.111c-4.789,0-9.336-0.717-13.646-2.393c-3.593-1.678-6.944-3.832-9.578-6.943v40.459h-19.151
		V113.12h11.253l7.419,9.336c2.872-2.874,6.465-5.269,10.532-7.182c4.072-1.438,8.382-2.396,12.691-2.154H926.126z"/>
	<path fill="#174880" d="M854.547,81.277c-5.506,0-9.815,4.31-9.815,9.815s4.31,10.057,9.815,10.057s9.815-4.551,9.815-10.057
		c0.237-2.634-0.959-5.026-2.876-6.942c-1.675-1.915-4.306-3.111-6.939-3.111 M863.883,190.924h-19.151V113.12h19.151V190.924z"/>
</g>
</svg>
    ),
    'goibibo': (
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="75pt" height="59pt" viewBox="0 0 75 59" version="1.1">
      <g id="surface1">
      <path style=" stroke:none;fill-rule:evenodd;fill:rgb(5.099487%,40.79895%,70.199585%);fill-opacity:1;" d="M 31.46875 22.140625 C 32.175781 22.140625 32.75 22.660156 32.75 23.300781 C 32.75 23.945313 32.175781 24.464844 31.46875 24.464844 C 30.757813 24.464844 30.179688 23.945313 30.179688 23.300781 C 30.179688 22.660156 30.757813 22.140625 31.46875 22.140625 Z M 30.394531 25.605469 L 32.566406 25.605469 L 32.566406 32.855469 L 30.394531 32.855469 L 30.394531 25.605469 "/>
      <path style=" stroke:none;fill-rule:evenodd;fill:rgb(95.298767%,41.999817%,12.89978%);fill-opacity:1;" d="M 18.460938 29.6875 C 18.203125 32.082031 15.011719 31.949219 15.445313 28.785156 C 15.578125 27.808594 16.234375 26.890625 17.402344 27.199219 C 18.351563 27.453125 18.585938 28.519531 18.460938 29.6875 Z M 18.441406 31.835938 C 18.675781 34.644531 16.40625 35.066406 14.492188 34.34375 C 14.242188 34.246094 14.007813 34.09375 13.78125 34.015625 L 13.78125 35.84375 C 13.980469 36.109375 15.160156 36.265625 15.578125 36.289063 C 17.488281 36.402344 19.402344 35.945313 20.261719 34.195313 C 20.839844 33.023438 20.699219 31.523438 20.699219 30.109375 C 20.699219 28.597656 20.699219 27.085938 20.699219 25.574219 L 18.449219 25.574219 L 18.445313 26.429688 C 18.21875 26.261719 17.964844 25.605469 16.878906 25.441406 C 16.128906 25.324219 15.320313 25.5 14.777344 25.839844 C 13.773438 26.472656 13.125 27.648438 13.113281 29.335938 C 13.105469 31.007813 13.710938 32.234375 14.804688 32.769531 C 15.40625 33.066406 16.277344 33.152344 16.984375 32.949219 C 17.96875 32.660156 18.21875 32.019531 18.441406 31.835938 "/>
      <path style=" stroke:none;fill-rule:evenodd;fill:rgb(5.099487%,40.79895%,70.199585%);fill-opacity:1;" d="M 51.289063 29.652344 C 51.210938 30.179688 51.023438 30.644531 50.753906 30.917969 C 50.484375 31.191406 49.917969 31.40625 49.367188 31.277344 C 48.21875 31.011719 48.214844 29.703125 48.277344 28.785156 C 48.34375 27.800781 49.078125 26.9375 50.203125 27.1875 C 51.175781 27.40625 51.453125 28.542969 51.289063 29.652344 Z M 46.050781 32.886719 L 48.304688 32.886719 L 48.304688 32.03125 C 48.46875 32.125 48.761719 32.832031 49.867188 33.019531 C 50.628906 33.144531 51.457031 32.976563 52.003906 32.625 C 53.007813 31.96875 53.605469 30.835938 53.640625 29.128906 C 53.671875 27.503906 53.101563 26.164063 51.976563 25.65625 C 51.058594 25.242188 49.722656 25.324219 48.925781 26.011719 C 48.667969 26.234375 48.355469 26.648438 48.308594 26.679688 C 48.289063 25.980469 48.355469 22.382813 48.285156 22.074219 L 46.070313 22.074219 C 46.003906 22.367188 46.050781 26.75 46.050781 27.449219 C 46.050781 29.261719 46.050781 31.074219 46.050781 32.886719 "/>
      <path style=" stroke:none;fill-rule:evenodd;fill:rgb(5.099487%,40.79895%,70.199585%);fill-opacity:1;" d="M 39.140625 29.652344 C 38.839844 31.816406 36.78125 31.675781 36.265625 30.449219 C 36.085938 30.011719 36.09375 29.304688 36.128906 28.78125 C 36.191406 27.796875 36.9375 26.933594 38.058594 27.1875 C 39.023438 27.410156 39.300781 28.515625 39.140625 29.652344 Z M 33.902344 32.886719 L 36.152344 32.882813 L 36.15625 32.03125 C 36.34375 32.160156 36.304688 32.304688 36.792969 32.652344 C 38.164063 33.628906 41.414063 33.082031 41.488281 29.128906 C 41.523438 27.503906 40.957031 26.152344 39.808594 25.652344 C 38.726563 25.179688 37.222656 25.375 36.460938 26.320313 C 36.382813 26.414063 36.246094 26.621094 36.15625 26.679688 L 36.152344 22.082031 L 33.902344 22.074219 L 33.902344 32.886719 "/>
      <path style=" stroke:none;fill-rule:evenodd;fill:rgb(5.099487%,40.79895%,70.199585%);fill-opacity:1;" d="M 58.097656 31.3125 C 56.828125 31.3125 56.363281 30.515625 56.363281 29.234375 C 56.363281 28.003906 56.875 27.152344 58.097656 27.152344 C 59.417969 27.152344 59.664063 28.21875 59.664063 29.335938 C 59.664063 30.425781 59.214844 31.3125 58.097656 31.3125 Z M 54.09375 29.796875 C 54.324219 32.046875 56.097656 33.292969 58.597656 33.027344 C 60.824219 32.789063 62.183594 31.121094 61.945313 28.636719 C 61.5 23.996094 53.527344 24.199219 54.09375 29.796875 "/>
      <path style=" stroke:none;fill-rule:evenodd;fill:rgb(95.298767%,41.999817%,12.89978%);fill-opacity:1;" d="M 23.882813 29.6875 C 23.59375 26.894531 25.785156 26.828125 26.59375 27.488281 C 27.386719 28.136719 27.5625 30.933594 25.949219 31.277344 C 25.402344 31.394531 24.757813 31.246094 24.449219 30.964844 C 24.117188 30.660156 23.945313 30.261719 23.882813 29.6875 Z M 25.050781 25.433594 C 22.769531 25.660156 21.371094 27.179688 21.585938 29.703125 C 21.777344 31.996094 23.507813 33.25 25.980469 33.035156 C 28.269531 32.835938 29.621094 31.230469 29.453125 28.742188 C 29.296875 26.492188 27.496094 25.191406 25.050781 25.433594 "/>
      <path style=" stroke:none;fill-rule:nonzero;fill:rgb(13.699341%,12.199402%,12.5%);fill-opacity:1;" d="M 50.171875 36.34375 C 50.171875 36.195313 50.21875 36.070313 50.316406 35.964844 C 50.410156 35.855469 50.523438 35.804688 50.65625 35.804688 C 50.789063 35.804688 50.90625 35.855469 51 35.964844 C 51.09375 36.070313 51.140625 36.195313 51.140625 36.34375 C 51.140625 36.492188 51.09375 36.621094 51 36.726563 C 50.90625 36.832031 50.789063 36.882813 50.65625 36.882813 C 50.523438 36.882813 50.410156 36.832031 50.316406 36.726563 C 50.21875 36.621094 50.171875 36.492188 50.171875 36.34375 Z M 53.820313 36.042969 L 53.820313 36.691406 C 53.503906 36.820313 53.214844 36.882813 52.953125 36.882813 C 52.5 36.882813 52.140625 36.746094 51.871094 36.476563 C 51.601563 36.207031 51.464844 35.847656 51.464844 35.402344 C 51.464844 34.96875 51.601563 34.605469 51.875 34.324219 C 52.148438 34.042969 52.492188 33.902344 52.914063 33.902344 C 53.1875 33.902344 53.476563 33.960938 53.78125 34.085938 L 53.78125 34.757813 C 53.558594 34.628906 53.339844 34.566406 53.125 34.566406 C 52.882813 34.566406 52.691406 34.640625 52.542969 34.789063 C 52.398438 34.941406 52.328125 35.144531 52.328125 35.394531 C 52.328125 35.648438 52.398438 35.855469 52.539063 36.011719 C 52.679688 36.167969 52.867188 36.242188 53.09375 36.242188 C 53.265625 36.242188 53.507813 36.175781 53.820313 36.042969 Z M 55.507813 33.902344 C 55.910156 33.902344 56.253906 34.03125 56.53125 34.296875 C 56.8125 34.558594 56.953125 34.925781 56.953125 35.394531 C 56.953125 35.867188 56.808594 36.234375 56.523438 36.492188 C 56.238281 36.753906 55.902344 36.882813 55.507813 36.882813 C 55.082031 36.882813 54.734375 36.746094 54.464844 36.46875 C 54.195313 36.191406 54.058594 35.832031 54.058594 35.390625 C 54.058594 34.941406 54.195313 34.578125 54.472656 34.308594 C 54.746094 34.035156 55.09375 33.902344 55.507813 33.902344 Z M 55.511719 36.347656 C 55.894531 36.347656 56.089844 36.023438 56.089844 35.371094 C 56.089844 34.753906 55.894531 34.441406 55.511719 34.441406 C 55.324219 34.441406 55.179688 34.523438 55.078125 34.6875 C 54.972656 34.851563 54.917969 35.085938 54.917969 35.394531 C 54.917969 36.03125 55.117188 36.347656 55.511719 36.347656 Z M 58.144531 33.960938 L 58.144531 34.328125 C 58.417969 34.042969 58.714844 33.902344 59.035156 33.902344 C 59.476563 33.902344 59.78125 34.101563 59.957031 34.507813 C 60.269531 34.101563 60.605469 33.902344 60.96875 33.902344 C 61.265625 33.902344 61.503906 34 61.691406 34.203125 C 61.878906 34.402344 61.972656 34.660156 61.972656 34.984375 L 61.972656 36.820313 L 61.164063 36.820313 L 61.164063 35.144531 C 61.164063 34.941406 61.121094 34.785156 61.039063 34.671875 C 60.957031 34.558594 60.839844 34.503906 60.691406 34.503906 C 60.457031 34.503906 60.246094 34.664063 60.058594 34.988281 L 60.058594 36.820313 L 59.25 36.820313 L 59.25 35.125 C 59.25 34.925781 59.207031 34.769531 59.113281 34.664063 C 59.027344 34.554688 58.90625 34.503906 58.757813 34.503906 C 58.546875 34.503906 58.34375 34.632813 58.144531 34.898438 L 58.144531 36.820313 L 57.335938 36.820313 L 57.335938 33.960938 L 58.144531 33.960938 "/>
      <path style=" stroke:none;fill-rule:evenodd;fill:rgb(5.099487%,40.79895%,70.199585%);fill-opacity:1;" d="M 43.648438 22.140625 C 44.359375 22.140625 44.933594 22.660156 44.933594 23.300781 C 44.933594 23.945313 44.359375 24.464844 43.648438 24.464844 C 42.941406 24.464844 42.363281 23.945313 42.363281 23.300781 C 42.363281 22.660156 42.941406 22.140625 43.648438 22.140625 Z M 42.578125 25.605469 L 44.746094 25.605469 L 44.746094 32.855469 L 42.578125 32.855469 L 42.578125 25.605469 "/>
      </g>
      </svg>
    ),
  };

  return icons[name] || null;
};


const Modal = ({ isOpen, onClose, platform, }) => {
  if (!isOpen) return null;
  const user = localStorage.getItem('user');
  const getToken = localStorage.getItem('token');
  const token = JSON.parse(getToken)

  console.log('token isss', token)
  if (!token) {
    setError('Authorization token missing. Please log in.');
    return;
  }

  const onDelete = async () => {
    console.log('this is what is send', platform)
    const result = await axios.post('https://synxbackend.synxautomate.com/deleteLink', { user, platform: platform.name }, {
      headers: {
        Authorization: `Bearer ${token}`,
      }
    });
    console.log('result', result)
    if (result.status === 200) {
      window.location.reload();
    }
  }

  return (
    <div className="fixed inset-0 bg-gray-800 bg-opacity-75 flex items-center justify-center p-4">
      <div className="bg-white p-6 rounded-lg shadow-lg w-full max-w-md sm:max-w-lg md:max-w-xl lg:max-w-2xl">
        <h2 className="text-2xl font-bold mb-4">Edit {platform.name}</h2>
        <a href="#" className="block mb-2">
          <p className="text-gray-700">Integration details for {platform.name}</p>
        </a>
        <div className="mt-6 flex gap-4 justify-end">
          <button
            onClick={onClose}
            className="px-4 py-2 bg-black text-white rounded-lg hover:bg-gray-800"
          >
            Close
          </button>
          <button
            onClick={onDelete}
            className="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600"
          >
            Delete
          </button>
        </div>
      </div>
    </div>
  );
};

const IntegrationCard = ({ platform, onEdit, onIntegrate, integrated }) => {
  const isPlatformIntegrated = integrated.some(
    (item) => item.platform === platform.name
  );

  return (
    <div className="bg-white border rounded-lg p-4 shadow-md text-center">
      <div className="flex justify-end">
        {isPlatformIntegrated && (
          <span className="text-green-500 text-lg">✔</span>
        )}
      </div>
      <div className="my-4 flex justify-center items-center">
        <PlatformIcon name={platform.name} color={platform.color} />
      </div>
      <h3 className="text-lg font-semibold">{platform.name}</h3>
      <button
        onClick={() => isPlatformIntegrated ? onEdit(platform) : onIntegrate(platform)}
        className={`mt-4 w-full py-2 rounded-lg ${isPlatformIntegrated
            ? 'bg-black text-white'
            : 'bg-gray-200 text-gray-600'
          }`}
      >
        {isPlatformIntegrated ? 'Edit' : 'Integrate'}
      </button>
    </div>
  );
}


const Integrations = () => {
  const [isEditModalOpen, setEditModalOpen] = useState(false);
  const [isLinkModalOpen, setLinkModalOpen] = useState(false);
  const [currentPlatform, setCurrentPlatform] = useState(null);
  const [integrated, setIntegrated] = useState([]);

  const navigate = useNavigate()

  const platforms = [
    { name: 'trustpilot', integrated: false, color: '#00B67A' },
    { name: 'booking.com', integrated: true, color: '#003580' },
    { name: 'airbnb', integrated: true, color: '#FF5A5F' },
    { name: 'google', integrated: false, color: '#1877F2' },
    { name: 'agoda', integrated: false, color: '#4285F4' },
    { name: 'tripadvisor', integrated: false, color: '#00AA6C' },
    { name: 'makeMyTrip', integrated: false, color: '#34A853' },
    { name: 'goibibo', integrated: false, color: '#3DDC84' },
  ];

  const user = localStorage.getItem('user')

  console.log('user is', user)

  useEffect(() => {
    const fetchIntegrations = async () => {
      const getToken = localStorage.getItem('token');
      const token = JSON.parse(getToken)
      try {
        // const result = await axios.post('https://synxbackend.synxautomate.com/integratepage', { user }, {
        const result = await axios.post('https://synxbackend.synxautomate.com/integratepage', { user }, {
          headers: {
            Authorization: `Bearer ${token}`,
          }
        });

        if(result.data.message === "Not Found"){
          navigate('/PricingTable');
          return
        }
        console.log('result.data.message',result.data.message)

        setIntegrated(result.data.reviewLink)
        console.log('result', result.data);
      } catch (error) {
        console.error("Error fetching integrations:", error);
      }
    }
    fetchIntegrations();
  }, []);



  const handleEditClick = (platform) => {
    setCurrentPlatform(platform);
    setEditModalOpen(true);
  };

  const handleIntegrateClick = (platform) => {
    console.log('platform', platform);
    console.log('integrated', integrated);
    setCurrentPlatform(platform);
    setLinkModalOpen(true);
  };

  const handleCloseModals = async () => {
    setEditModalOpen(false);
    setLinkModalOpen(false);
    setCurrentPlatform(null);
  };

  const integratedPlatforms = platforms.filter((p) => p.integrated).length;

  return (
    <div className="flex">
      <Nav />
      <div className="flex-grow lg:ml-64 p-6">
        <div className="max-w-6xl mx-auto">
          <h1 className="text-2xl font-bold mb-4">Integrations</h1>
          <p className="text-gray-600 mb-6">
            Integrate the platforms where you receive or want to receive reviews.
            Connect with Google and Google directly via login, so you can reply to
            reviews from the Public reviews section. For the other platforms, simply
            enter your page link to import reviews. We do not import all the reviews
            but the most recent ones.
          </p>
          <div className="flex flex-col sm:flex-row justify-between items-center mb-6">
            <input
              type="text"
              placeholder="Search"
              className="border p-2 rounded-lg w-full sm:w-1/3 mb-4 sm:mb-0"
            />
            <span className="text-gray-600">
              Platforms Integrated: {integrated.length} / {platforms.length}
            </span>
          </div>
          <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
            {platforms.map((platform) => (
              <IntegrationCard
                key={platform.name}
                platform={platform}
                onEdit={handleEditClick}
                onIntegrate={handleIntegrateClick}
                integrated={integrated}
              />
            ))}
          </div>

        </div>
      </div>
      <Modal
        isOpen={isEditModalOpen}
        onClose={handleCloseModals}
        platform={currentPlatform}
      />
      <LinkPageModal
        isOpen={isLinkModalOpen}
        onClose={handleCloseModals}
        platform={currentPlatform}
        integrated={integrated}

      />
    </div>
  );
};

export default Integrations;
